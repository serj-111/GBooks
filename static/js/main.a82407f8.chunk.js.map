{"version":3,"sources":["media/book_thumbnail.png","components/Books.jsx","components/Header.jsx","components/CurrentBook.jsx","App.jsx","store/currentBookReducer.js","store/allBooksReducer.js","store/index.js","index.js"],"names":["Books","loadMore","scrollRef","dispatch","useDispatch","books","useSelector","state","allBooksReducer","totalItems","isFetching","loadmore_button_display","isFetching_loadmore","display_scrollUp_button","error_indicator","key_counter","window","addEventListener","e","currentTarget","scrollY","type","payload","className","length","map","item","thumbnail_url","volumeInfo","imageLinks","thumbnail","empty_book_thumbnail","categories","authors","join","to","onClick","props","scrollTo","current","scrollHeight","etag","src","alt","title","style","display","Header","fetchBooks","history","useHistory","useState","checked_free_ebook","handlerFreeEbooks","checked_only_author","handlerOnlyAuthor","placeholder","input","console","log","erase_button","visibility","ref","onSubmit","preventDefault","push","onChange","event","target","value","previousSibling","id","checked","htmlFor","CurrentBook","book_etag","currentBookReducer","handlerBack","goBack","arr_bookcards","buy_button","saleInfo","buyLink","href","rel","page_count","pageCount","sale_info","listPrice","amount","currencyCode","published_date","publishedDate","publisher","preview","previewLink","description","App","React","createRef","startIndex","orderBy","category","input_for_loadmore","orderBy_for_loadmore","category_for_loadmore","free_ebooks","search_by_author","fetch","then","response","json","result","items","catch","exact","path","render","defaultState","large_thumbnail","undefined","rootReducer","combineReducers","action","store","createStore","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.a82407f8.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/book_thumbnail.94cd23fa.png\";","import './Books.scss';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {Link} from \"react-router-dom\";\r\nimport empty_book_thumbnail from \"../media/book_thumbnail.png\"\r\n\r\n\r\nexport const Books = ({loadMore, scrollRef})=> {\r\n\r\n    const dispatch = useDispatch()\r\n    const books = useSelector(state => state.allBooksReducer.books)\r\n    const totalItems = useSelector(state => state.allBooksReducer.totalItems)\r\n    const isFetching = useSelector(state => state.allBooksReducer.isFetching)\r\n    const loadmore_button_display = useSelector(state => state.allBooksReducer.loadmore_button_display)\r\n    const isFetching_loadmore = useSelector(state => state.allBooksReducer.isFetching_loadmore)\r\n    const display_scrollUp_button = useSelector(state => state.allBooksReducer.display_scrollUp_button)\r\n    const error_indicator = useSelector(state => state.allBooksReducer.error_indicator)\r\n    let key_counter = 0\r\n\r\n    const currentBookHandler = (props) => {\r\n        window.scrollTo(0, scrollRef.current.scrollHeight)\r\n        dispatch({type: \"BOOK_ETAG\", payload: props.etag})\r\n    }\r\n\r\n    const scrollHandler = (e) => {\r\n        if (e.currentTarget.scrollY > 800) {\r\n            dispatch({type: \"DISPLAY_SCROLLUP_BUTTON\", payload: \"\"})\r\n        }else{\r\n            dispatch({type: \"DISPLAY_SCROLLUP_BUTTON\", payload: \"none\"})\r\n        }\r\n    }\r\n    window.addEventListener(\"scroll\", scrollHandler)\r\n\r\n\r\n    if (error_indicator === 0) {\r\n        return (\r\n            <div className=\"loading\">\r\n                <h2>Ничего не найдено</h2>\r\n            </div>\r\n        )\r\n    } else if (books.length === 0) {\r\n        return (\r\n            <div className=\"loading\">\r\n                <h2>Пусто</h2>\r\n            </div>\r\n        )\r\n    } else if (isFetching) {\r\n        return (\r\n            <div className=\"loading\">\r\n                <h2>...Загрузка</h2>\r\n            </div>\r\n        )\r\n    } else {\r\n        return (\r\n            <div>\r\n                <p className=\"d-flex justify-content-center p-3\">{totalItems}</p>\r\n                <div className=\"container mb-3\">\r\n                    <div className=\" row row-cols-2 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 g-4\" >\r\n                        {books.map( item => {\r\n                            let thumbnail_url = item.volumeInfo.imageLinks ? item.volumeInfo.imageLinks.thumbnail : empty_book_thumbnail\r\n                            let categories = item.volumeInfo.categories ? item.volumeInfo.categories[0] : \"\"\r\n                            let authors = item.volumeInfo.authors ? item.volumeInfo.authors.join(', ') : item.volumeInfo.authors\r\n                            return (\r\n                                <Link className=\"col book_block\"  key={key_counter++} to=\"/book\" onClick={() => currentBookHandler(item)}>\r\n                                    <div className=\"card h-100\">\r\n                                        <img src={thumbnail_url} className=\"book_image mb-3 rounded shadow\" alt=\"Book thumbnail\"/>\r\n                                        <div>\r\n                                            <p><u>{categories}</u></p>\r\n                                            <h6>{item.volumeInfo.title}</h6>\r\n                                            <p><small className=\"text-muted\">{authors}</small></p>\r\n                                        </div>\r\n                                    </div>\r\n                                </Link>\r\n                            )\r\n                        })}\r\n                    </div>\r\n                </div>\r\n                <div className=\"container\">\r\n                    <div className=\"row d-flex justify-content-center\">\r\n                        <div className=\"loadmore_button mb-5 rounded\" onClick={loadMore} style={{display: loadmore_button_display}}>\r\n                            <strong>{isFetching_loadmore}</strong>\r\n                        </div>\r\n                        <div className=\"up_button mb-5 rounded\" onClick={() => {\r\n                            window.scrollTo( 0, 0 );\r\n                        }} style={{display: display_scrollUp_button}}>\r\n                            <i className=\"fas fa-chevron-up\"/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import './Header.scss';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {Link, useHistory} from 'react-router-dom';\r\nimport {useState} from \"react\";\r\n\r\n\r\nexport const Header = ({fetchBooks, scrollRef}) => {\r\n\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n    const [checked_free_ebook, handlerFreeEbooks] = useState(false);\r\n    const [checked_only_author, handlerOnlyAuthor] = useState(false);\r\n    const placeholder = useSelector(state => state.allBooksReducer.placeholder)\r\n    const input = useSelector(state => state.allBooksReducer.input)\r\n    console.log(placeholder)\r\n    const handlerOrder = (e) => dispatch({type: \"CHANGE_ORDER\", payload: e.target.value})\r\n    const handlerCategory = (e) => dispatch({type: \"CHANGE_CATEGORY\", payload: e.target.value})\r\n\r\n    const onSubmit = (e) => {\r\n        e.preventDefault()\r\n        history.push('/')\r\n        fetchBooks()\r\n    }\r\n    if (checked_free_ebook) {\r\n        dispatch({type: \"FREE_EBOOKS\", payload: \"&filter=free-ebooks\"})\r\n    } else {\r\n        dispatch({type: \"FREE_EBOOKS\", payload: \"\"})\r\n    }\r\n    if (checked_only_author) {\r\n        dispatch({type: \"SEARCH_BY_AUTHOR\", payload: \"inauthor:\"})\r\n\r\n    } else {\r\n        dispatch({type: \"SEARCH_BY_AUTHOR\", payload: \"\"})\r\n\r\n    }\r\n    const erase_button = input === \"\" ? {visibility: \"hidden\"} : {display: \"\"}\r\n    return(\r\n        <div ref={scrollRef} className=\"header container-fluid\">\r\n            <div className=\"header_layer py-5 shadow\">\r\n                <div className=\"header_content row\">\r\n                    <div className=\"col-sm-4 d-flex justify-content-center\">\r\n                        <Link to=\"/\"><div className=\"fas fa-book\"><div className=\"title\">Gbooks<br/><h6>Поиск книг <br/>в каталоге Google</h6></div></div></Link>\r\n                    </div>\r\n                    <div className=\"col-sm-8\">\r\n                        <div className=\"row d-flex justify-content-center pt-3\">\r\n                            <div className=\"col d-flex justify-content-center\">\r\n                                <form onSubmit={onSubmit}>\r\n                                    <input className=\"search_bar rounded\" type=\"text\" placeholder={placeholder}\r\n                                       onChange={ (event) => {\r\n                                           dispatch({type: \"INPUT\", payload: event.target.value})\r\n                                       }}/><i className=\"fas fa-times\" onClick={ (e)=> {\r\n                                           e.target.previousSibling.value = \"\"\r\n                                           dispatch({type: \"INPUT\", payload: \"\"})\r\n                                       }} style={erase_button}/>\r\n                                    <Link to=\"/\"><i className=\"fas fa-search\" onClick={fetchBooks}/></Link>\r\n                                </form>\r\n                            </div>\r\n                            <div className=\"row d-flex justify-content-center pt-3\">\r\n                                <div className=\"col-md-6 col-lg-auto d-flex justify-content-center d-flex align-items-center pt-3\">\r\n                                    <label>Категория</label>\r\n                                    <select className=\"rounded\" onChange={handlerCategory}>\r\n                                        <option value=\"\">Все</option>\r\n                                        <option value=\"+subject:art\">Искусство</option>\r\n                                        <option value=\"+subject:biography\">Биография</option>\r\n                                        <option value=\"+subject:computers\">Компьютеры</option>\r\n                                        <option value=\"+subject:history\">История</option>\r\n                                        <option value=\"+subject:medical\">Медицина</option>\r\n                                        <option value=\"+subject:poetry\">Поэзия</option>\r\n                                    </select>\r\n                                </div>\r\n                                <div className=\" col-md-6 col-lg-auto d-flex justify-content-center d-flex align-items-center pt-3\">\r\n                                    <label>Сортировка</label>\r\n                                    <select className=\"rounded\" onChange={handlerOrder}>\r\n                                        <option value=\"&orderBy=relevance\">По умолчанию</option>\r\n                                        <option value=\"&orderBy=newest\">Новые</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"row d-flex justify-content-center pt-3\">\r\n                                <div className=\"col-md-auto col-lg-auto d-flex justify-content-center d-flex align-items-center pt-3 mx-5\">\r\n                                    <div className=\"form-check\">\r\n                                        <input className=\"form-check-input\" type=\"checkbox\" id=\"inlineCheckbox1\"\r\n                                               value=\"option1\" checked={checked_only_author} onChange={ () => handlerOnlyAuthor(!checked_only_author)}/>\r\n                                        <label className=\"form-check-label\" htmlFor=\"inlineCheckbox1\">Поиск по автору</label>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"col-md-auto col-lg-auto d-flex justify-content-center d-flex align-items-center pt-3\">\r\n                                    <div className=\"form-check\">\r\n                                        <input className=\"form-check-input\" type=\"checkbox\" id=\"inlineCheckbox2\"\r\n                                               value=\"option1\" checked={checked_free_ebook} onChange={ () => handlerFreeEbooks(!checked_free_ebook)}/>\r\n                                        <label className=\"form-check-label \" htmlFor=\"inlineCheckbox2\">Только бесплатные</label>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import {useSelector} from \"react-redux\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport './CurrentBook.scss';\r\nimport empty_book_thumbnail from \"../media/book_thumbnail.png\"\r\n\r\n\r\nexport const CurrentBook = () => {\r\n\r\n    const history = useHistory()\r\n    const book_etag = useSelector(state => state.currentBookReducer.book_etag)\r\n    const books = useSelector(state => state.allBooksReducer.books)\r\n    let key_counter = 0\r\n\r\n    const handlerBack = () => {\r\n        history.goBack()\r\n    }\r\n\r\n    let arr_bookcards = books.map( item => {\r\n        let thumbnail_url = item.volumeInfo.imageLinks ? item.volumeInfo.imageLinks.thumbnail : empty_book_thumbnail\r\n        let categories = item.volumeInfo.categories ? item.volumeInfo.categories : \"\"\r\n        let authors = item.volumeInfo.authors ? item.volumeInfo.authors.join(', ') : item.volumeInfo.authors\r\n        let buy_button = item.saleInfo.buyLink ? <a href={item.saleInfo.buyLink} rel=\"noreferrer\" target=\"_blank\" className=\"buy_button shadow mb-3 rounded\">Приобрести в Google Play</a> : \"\"\r\n        let page_count = item.volumeInfo.pageCount ? <div className=\"d-flex justify-content-center\">Количество страниц:&nbsp;<strong>{item.volumeInfo.pageCount}</strong></div> : \"\"\r\n        let sale_info = item.saleInfo.listPrice ? <div className=\"d-flex justify-content-center\">Стоимость:&nbsp;<strong>{item.saleInfo.listPrice.amount}</strong>&nbsp;{item.saleInfo.listPrice.currencyCode}</div> : \"\"\r\n        let published_date = item.volumeInfo.publishedDate ? <div className=\"d-flex justify-content-center\">Дата публикации:&nbsp;{item.volumeInfo.publishedDate}</div> : \"\"\r\n        let publisher = item.volumeInfo.publisher ? <div className=\"d-flex justify-content-center mb-2\">{item.volumeInfo.publisher}</div> : \"\"\r\n        let preview = item.volumeInfo.previewLink ? <a href={item.volumeInfo.previewLink} rel=\"noreferrer\" target=\"_blank\" className=\"buy_button shadow mb-3 rounded\">Прочитать отрывок</a> : \"\"\r\n        if (item.etag === book_etag) {\r\n            return (\r\n                <div className=\"container pt-5\" key={key_counter++}>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-sm-6\">\r\n                            <div className=\"row mb-3 d-flex justify-content-center\">\r\n                                <img src={thumbnail_url} className=\"current_card_img rounded shadow\" alt=\"Book thumbnail\"/>\r\n                            </div>\r\n                            <div className=\"row mb-3 \">\r\n                                {published_date}\r\n                                {publisher}\r\n                                {page_count}\r\n                                {sale_info}\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-sm-6\">\r\n                            <h3>{item.volumeInfo.title}</h3>\r\n                            <h5 className=\"text-muted\">{authors}</h5>\r\n                            <p><u>{categories}</u></p>\r\n                            <p className=\"description mb-4\">{item.volumeInfo.description}</p>\r\n                            {buy_button}\r\n                            {preview}\r\n                            <div className=\"back_button shadow mb-5 rounded\" onClick={handlerBack}>Назад</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n        return null\r\n    })\r\n\r\n        return (\r\n            <div>\r\n                {arr_bookcards}\r\n            </div>)\r\n\r\n}","import './App.css';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Books} from \"./components/Books\";\nimport {Header} from \"./components/Header\";\nimport {CurrentBook} from \"./components/CurrentBook\";\nimport {BrowserRouter, Route} from \"react-router-dom\";\nimport React from \"react\";\n\nfunction App() {\n\n    //vk-tunnel --insecure=1 --http-protocol=https --ws-protocol=wss --host=localhost --port=10888\n\n    const scrollRef = React.createRef()\n    const dispatch = useDispatch()\n    const startIndex = useSelector(state => state.allBooksReducer.startIndex)\n    const input = useSelector(state => state.allBooksReducer.input)\n    const orderBy = useSelector( state => state.allBooksReducer.orderBy)\n    const category = useSelector( state => state.allBooksReducer.category)\n    const input_for_loadmore = useSelector( state => state.allBooksReducer.input_for_loadmore)\n    const orderBy_for_loadmore = useSelector( state => state.allBooksReducer.orderBy_for_loadmore)\n    const category_for_loadmore = useSelector( state => state.allBooksReducer.category_for_loadmore)\n    const free_ebooks = useSelector( state => state.allBooksReducer.free_ebooks)\n    const search_by_author = useSelector( state => state.allBooksReducer.search_by_author)\n\n    if (search_by_author) {\n        dispatch({type: \"INPUT_PLACEHOLDER\", payload: \"Автор\"})\n    } else {\n        dispatch({type: \"INPUT_PLACEHOLDER\", payload: \"Название\"})\n    }\n    const fetchBooks = () => {\n        if (!input) {\n            dispatch({type: \"INPUT_PLACEHOLDER\", payload: \"Пустой запрос\"})\n            dispatch({type: \"FETCH_BOOKS\", payload: []})\n            dispatch({type: \"TOTAL_ITEMS\", payload: \"\"})\n            dispatch({type: \"LOADMORE_BUTTON\", payload: \"none\"})\n        } else {\n            dispatch({type: \"IS_FETCHING\", payload: true})\n            fetch(`https://www.googleapis.com/books/v1/volumes?q=${search_by_author}${input}${category}&startIndex=0&maxResults=15${orderBy}${free_ebooks}&key=AIzaSyCxJF0JN_3n7DjrjVPcNFbBDdpveeeWm1k`)\n                .then(response => response.json())\n                .then(result => {\n                    //Запрос large thumbnail и добавление в первоначальный массив\n                    /*let res = []\n                    result.items.map( item => {\n                        fetch(`https://www.googleapis.com/books/v1/volumes/${item.id}`)\n                            .then(response => response.json())\n                             .then(result => {\n                                 if (result.volumeInfo !== undefined && result.volumeInfo.imageLinks !== undefined) {\n                                     item = {...item, new_thumbnail: result.volumeInfo.imageLinks.large}\n                                     res.push(item)\n                                 } else {\n                                     item = {...item, new_thumbnail: undefined}\n                                     res.push(item)\n                                 }\n                             })\n                        return res\n                    })\n                    setTimeout( () => {\n                        //dispatch сюда\n                    }, 1000)*/\n                    dispatch({type: \"ERROR_INDICATOR\", payload: result.totalItems})\n                    dispatch({type: \"FETCH_BOOKS\", payload: result.items})\n                    dispatch({type: \"IS_FETCHING\", payload: false})\n                    dispatch({type: \"TOTAL_ITEMS\", payload: <span>Найдено <strong>{result.totalItems}</strong></span>})\n                    dispatch({type: \"INPUT_PLACEHOLDER\", payload: \"Название\"})\n                    dispatch({type: \"CHANGE_INPUT_FOR_LOADMORE\", payload: input})\n                    dispatch({type: \"CHANGE_ORDER_FOR_LOADMORE\", payload: orderBy})\n                    dispatch({type: \"CHANGE_CATEGORY_FOR_LOADMORE\", payload: category})\n                    dispatch({type: \"CLEAR_START_INDEX\", payload: 15})\n                    result.totalItems > 15 ? dispatch({type: \"LOADMORE_BUTTON\", payload: \"\"}) : dispatch({type: \"LOADMORE_BUTTON\", payload: \"none\"})\n                })\n                .catch(e => {\n                    console.log(\"Ошибка \" + e)\n                })\n        }\n    }\n    const loadMore = () => {\n        dispatch({type: \"IS_FETCHING_LOADMORE\", payload: <i className=\"fas fa-redo-alt\"/>})\n        fetch(`https://www.googleapis.com/books/v1/volumes?q=${input_for_loadmore}${category_for_loadmore}&startIndex=${startIndex}&maxResults=15&${orderBy_for_loadmore}${free_ebooks}&key=AIzaSyCxJF0JN_3n7DjrjVPcNFbBDdpveeeWm1k`)\n            .then(response => response.json())\n            .then(result => {\n                //Сюда шаблон запроса large thumbnail и добавления в первоначальный массив loadmore\n                dispatch({type: \"LOADMORE_BOOKS\", payload: result.items})\n                dispatch({type: \"IS_FETCHING_LOADMORE\", payload: \"Еще\"})\n                dispatch({type: \"START_INDEX\", payload: 15})\n                startIndex >= result.totalItems - 15 ? dispatch({type: \"LOADMORE_BUTTON\", payload: \"none\"}) : dispatch({type: \"LOADMORE_BUTTON\", payload: \"\"})\n            })\n            .catch(e => {\n                dispatch({type: \"ERROR_INDICATOR\", payload: true})\n                console.log(e)\n            })\n    }\n    return(\n        <BrowserRouter>\n            <Header fetchBooks={fetchBooks} scrollRef={scrollRef} />\n            <Route exact path=\"/\" render={()=><Books loadMore={loadMore} scrollRef={scrollRef}  />}/>\n            <Route path=\"/book\" render={()=><CurrentBook />}/>\n        </BrowserRouter>\n    );\n\n}\nexport default App;","const defaultState = {\r\n    large_thumbnail: \"\",\r\n    book_etag: \"\",\r\n}\r\n\r\nexport const currentBookReducer = (state= defaultState, action)=> {\r\n    switch (action.type) {\r\n        case \"BOOK_ETAG\":\r\n            return {...state, book_etag: action.payload}\r\n        case \"LARGE_THUMBNAIL\":\r\n            return {...state, large_thumbnail: action.payload}\r\n        default: return state\r\n    }\r\n}","\r\nconst defaultState = {\r\n    books: [],\r\n    totalItems: null,\r\n    isFetching: false,\r\n    loadmore_button_display: \"none\",\r\n    input: \"\",\r\n    placeholder: \"Название\",\r\n    orderBy: \"&orderBy=relevance\",\r\n    category: \"\",\r\n    isFetching_loadmore: \"Еще\",\r\n    input_for_loadmore: \"\",\r\n    orderBy_for_loadmore: \"\",\r\n    category_for_loadmore: \"\",\r\n    startIndex: 15,\r\n    display_scrollUp_button: \"none\",\r\n    error_indicator: undefined,\r\n    free_ebooks: \"\",\r\n    search_by_author: \"\",\r\n}\r\n\r\nexport const allBooksReducer = (state= defaultState, action)=> {\r\n    switch (action.type) {\r\n        case \"FETCH_BOOKS\":\r\n            return {...state, books: [...action.payload]}\r\n        case \"LOADMORE_BOOKS\":\r\n            return {...state, books: [...state.books, ...action.payload]}\r\n        case \"TOTAL_ITEMS\":\r\n            return {...state, totalItems: action.payload}\r\n        case \"IS_FETCHING\":\r\n            return {...state, isFetching: action.payload}\r\n        case \"LOADMORE_BUTTON\":\r\n            return {...state, loadmore_button_display: action.payload}\r\n        case \"INPUT\":\r\n            return {...state, input: action.payload}\r\n        case \"INPUT_PLACEHOLDER\":\r\n            return {...state, placeholder: action.payload}\r\n        case \"CHANGE_ORDER\" :\r\n            return {...state, orderBy: action.payload}\r\n        case \"CHANGE_CATEGORY\" :\r\n            return {...state, category: action.payload}\r\n        case \"IS_FETCHING_LOADMORE\" :\r\n            return {...state, isFetching_loadmore: action.payload}\r\n        case \"CHANGE_INPUT_FOR_LOADMORE\" :\r\n            return {...state, input_for_loadmore: action.payload}\r\n        case \"CHANGE_ORDER_FOR_LOADMORE\" :\r\n            return {...state, orderBy_for_loadmore: action.payload}\r\n        case \"CHANGE_CATEGORY_FOR_LOADMORE\" :\r\n            return {...state, category_for_loadmore: action.payload}\r\n        case \"START_INDEX\" :\r\n            return {...state, startIndex: state.startIndex + action.payload}\r\n        case \"CLEAR_START_INDEX\" :\r\n            return {...state, startIndex: action.payload}\r\n        case \"DISPLAY_SCROLLUP_BUTTON\" :\r\n            return {...state, display_scrollUp_button: action.payload}\r\n        case \"ERROR_INDICATOR\" :\r\n            return {...state, error_indicator: action.payload}\r\n        case \"FREE_EBOOKS\" :\r\n            return {...state, free_ebooks: action.payload}\r\n        case \"SEARCH_BY_AUTHOR\" :\r\n            return {...state, search_by_author: action.payload}\r\n\r\n        default: return state\r\n    }\r\n}","import {createStore, combineReducers} from \"redux\";\r\nimport {currentBookReducer} from \"./currentBookReducer\"\r\nimport {allBooksReducer} from \"./allBooksReducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n    allBooksReducer,\r\n    currentBookReducer,\r\n})\r\n\r\nexport const store = createStore(rootReducer)","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App.jsx';\nimport {store} from \"./store\";\nimport {Provider} from \"react-redux\";\n\n\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}